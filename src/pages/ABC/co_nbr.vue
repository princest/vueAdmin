<template>    <section>        <template>            <el-row :gutter=10 align="top">                <el-col :span="12" :offset=12>                    <span class="text-success">工具栏:</span>                    <span class="input-group">                    <span class="btn btn-warning" title="CRM施工环节"                          ng-click="open('co-crmtache',cci.CO_NBR)">CRM环节</span>                    <span class="btn btn-warning" title='查看送O解析情况'                          ng-click="open('co-bo',cci.CO_NBR)">B-O</span>                    <span class="btn btn-danger" title="未送O订单重新解析"                          ng-click="execproc('co-reparse',{'IP_CO_NBR': cci.CO_NBR })">重解析</span>                    <span class="btn btn-warning" title="关联订单组(在途)"                          ng-click="open('co-onwaygroup',cci.CO_NBR)">组</span>                    <span class="btn btn-warning" title="关联订单组(全部)"                          ng-click="open('co-allgroup',cci.CO_NBR)">关</span>                    <span class="btn btn-danger" title="修复问题订单(已判定异常)"                          ng-click="execproc('co-debug',{'IP_CO_NBR': cci.CO_NBR })">自动修复</span>                    <span class="btn btn-warning" title="O闭环状态同CRM闭环状态"                          ng-click="execproc('co-close-sync',{'IP_CO_NBR': cci.CO_NBR })">闭环同步</span>                    </span>                </el-col>            </el-row>            <el-row>                <el-col :offset=1 :span=22>                    <el-collapse v-model="activeLevelCo">                        <el-collapse-item v-bind:title="!activeLevelCo.length?'--':'当前订单信息:'+(cci.CO_NBR||'未选中')"                                          name="1">                            <el-row>                                <el-col :span=12>                                    <el-table :data="tableData" highlight-current-row v-loading="listLoading"                                              style="width:100%">                                        <template v-if="multiple">                                            <el-table-column prop="0" label="关键字" v-bind:width="bw*.20" sortable>                                            </el-table-column>                                            <el-table-column prop="1" label="订单号(最新)" v-bind:width="bw*.20" sortable>                                                <template scope="scope">                                                    <el-button type="text" @click.native.prevent="choose_co(scope.row)">                                                        {{scope.row[1]}}                                                    </el-button>                                                </template>                                            </el-table-column>                                            <el-table-column prop="2" label="状态" v-bind:width="bw*.15" sortable>                                            </el-table-column>                                            <el-table-column prop="3" label="详细" v-bind:width="bw*.45" sortable>                                                <template scope="scope">                                                    <pre v-bind:title="scope.row[3]">{{ scope.row[3] | pretty}}</pre>                                                </template>                                            </el-table-column>                                        </template>                                        <template v-if="!multiple">                                            <el-table-column prop="0" label="订单号" v-bind:width="bw*.20" sortable>                                                <template scope="scope">                                                    <el-button type="text" @click.native.prevent="choose_co(scope.row)">                                                        {{scope.row[0]}}                                                    </el-button>                                                </template>                                            </el-table-column>                                            <el-table-column prop="1" label="状态" v-bind:width="bw*.15" sortable>                                            </el-table-column>                                            <el-table-column label="详细" v-bind:width="bw*.65" sortable>                                                <template scope="scope">                                                    <pre>{{ scope.row[2] }}</pre>                                                </template>                                            </el-table-column>                                        </template>                                    </el-table>                                    <el-row>                                        <el-col :span="24" class="toolbar" style="padding-bottom:10px;">                                            <el-pagination                                                    :current-page="tableMeta.currentPage"                                                    :page-size="tableMeta.pageSize"                                                    :total="tableData.length"                                                    layout="total, prev, pager, next"                                                    style="float:right">                                            </el-pagination>                                        </el-col>                                    </el-row>                                </el-col>                                <el-col :span=11 v-if="cci&&cci.CO_NBR" class="cci">                                    <section>                                        <el-row :gutter=10 align="top">                                            <el-col :span="4">                                                <div class="bg-purple-dark">订单:</div>                                            </el-col>                                            <el-col :span="6">{{cci.CO_NBR}}</el-col>                                            <el-col :span="6">                                                <div class="bg-purple-dark">一次性费用:</div>                                            </el-col>                                            <el-col :span="8">{{cci.ONE_FEE}}</el-col>                                        </el-row>                                        <el-row :gutter=10 align="top">                                            <el-col :span="4">                                                <div class="bg-purple-dark">受理信息:</div>                                            </el-col>                                            <el-col :span="10">                                                <pre>{{'受理人:' + cci.combo || (cci.SO_STAFF_NAME +'\n营业厅:'+ cci.WORKAREA + '-'+cci.SO_METH)||'' }}</pre>                                            </el-col>                                            <el-col :span="4">                                                <div class="bg-purple-dark">商品:</div>                                            </el-col>                                            <el-col :span="6">{{cci.PRO}}</el-col>                                        </el-row>                                        <el-row :gutter=10 align="top">                                            <el-col :span="4">                                                <div class="bg-purple-dark">服务提供:</div>                                            </el-col>                                            <el-col :span="20">                                                <pre>{{cci["服务提供"]}}</pre>                                            </el-col>                                        </el-row>                                        <el-row :gutter=10>                                            <el-col :span="4">                                                <div class="bg-purple-dark">Oss状态:</div>                                            </el-col>                                            <el-col :span="4" ng-class="blink[0]">                                                <pre>{{cci.OSS_STSNAME}}</pre>                                            </el-col>                                            <el-col :span="4">                                                <div class="bg-purple-dark">流程过渡消息</div>                                            </el-col>                                            <el-col :span="12">{{cci.OPERATIONAL_MSG}}</el-col>                                        </el-row>                                    </section>                                </el-col>                            </el-row>                        </el-collapse-item>                    </el-collapse>                </el-col>            </el-row>            <el-row>                <so-nbr>                </so-nbr>            </el-row>        </template>        <!--分页-->    </section></template><script lang=babel>  import {mapActions, mapGetters, mapState} from 'vuex';  import {interacts} from '../../vuex/index' //引入vuex中的store  import so_nbr from './so_nbr.vue';  export default{    name: 'co-nbr',    data(){      return {        tableMeta: {          currentPage: 1,          pageSize: 5        }      }    },    props: ['multiple'],    methods: {      //选定订单      choose_co([s1, s2]){        let r = /^[0-9]+$/, payload = !!s2 && !r.test(s1) ? s2 : s1;        this.$store.dispatch(interacts.abc.act_show_co, payload)      }    },    components: {'so-nbr': so_nbr},    computed: {      ...mapState({        tableData: state => state.abc.co_nbr_list,        'cci': state => state.abc.current_co_info,      }),      bw(){        return window.innerWidth / 2 / 1;      },      activeLevelCo(){        let activeLevelCo = [];        if (this.tableData.length)          activeLevelCo.push('1');        return activeLevelCo;      },    },    mounted(){      console.log('---co_nbr组件已注入数据:', this.data, '-----');      if (this.data && this.data.length === 1) {        //this.choose_co(this.data[0][1],this.data[0][0])      }      var v = document.querySelector('.el-table__body-wrapper');      if (v) v.style.padding = 0;    },    filters: {      pretty(o){        try {          return JSON.parse(o);        } catch (e) {          return o;        }      }    }  }</script><style scoped>    div.el-collapse-item__content {        padding: 0 !important;    }    .el-collapse {        padding: 0;    }    pre {        background-color: #eff7ff;        border-radius: 4px;        margin: 0px;        padding: 0;    }    .cci span, .cci div {        padding: 5px;    }</style>