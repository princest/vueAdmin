/** * Created by Administrator on 2017/1/22. */import 'oidc-token-manager';console.log(window.location,window.location.search);function getQueryParam(param) {  var result =  window.location.search.match(    new RegExp("(\\?|&)" + param + "(\\[\\])?=([^&]*)")  );  return result ? result[3] : false;}let op = getQueryParam('op');let mgr;switch(op) {  case 'callback':    let client_id = 'tripgalleryimplicit';    let authority = 'http://10.36.111.213/identity'    //let post_logout_redirect_uri = window.location.protocol + "//" + window.location.host + '/#' + localStorage.getItem('last-route')    let savedBackUrl = localStorage.getItem('last-url')    console.log(savedBackUrl)    let config = {      client_id: client_id,      authority: authority,      //load_user_profile:false    };    mgr = new OidcTokenManager(config);    mgr.processTokenCallbackAsync().then(function (payload) {      window.location = savedBackUrl    }, function (error) {      alert("错误发生:Problem Getting Token: " + (error.message || error));    });    break;  case 'logout':    mgr = new OidcTokenManager();    //remove the token: clear token(s) & values from local storage    mgr.removeToken();    window.location=  window.location.protocol + "//" + window.location.host;    break;  case 'silent_refresh':    mgr = new OidcTokenManager();    mgr.processTokenCallbackSilent();    break;  default:   alert('不支持这种返回处理');}